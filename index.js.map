{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst form = document.querySelector(\"#search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst key = \"53317222-33ad4c1be86b2938ae2a211ff\";\n\nfunction fetchImages(searchTerm) {\n\n    const URL = `https://pixabay.com/api/?key=${key}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    return fetch(URL)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n        .then((data) => {\n            if (data.hits.length === 0) {\n                throw new Error(\"No images found\");\n            }\n            return data.hits;\n        })\n        \n    }\n\nform.addEventListener(\"submit\", onSearch);\n\nfunction onSearch(event) {\n    event.preventDefault();\n\n    const searchTerm = event.currentTarget.elements.searchQuery.value.trim();\n\n    if (searchTerm === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position: 'topRight'\n        });\n        return;\n    }\n\n    gallery.innerHTML = \"\";\n    loader.style.display = \"block\";\n    \n    fetchImages(searchTerm)\n    .then(images => {\n        const markup = images.map(createImageCardMarkup).join(\"\");\n\n        gallery.insertAdjacentHTML(\"beforeend\", markup)\n\n        lightbox.refresh();\n    })\n    .catch((error) => {\n\n        if (error.message == \"No images found\") {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, there are no images matching your search query. Please, try again!\",\n                position: 'topRight'\n            });\n        } else {\n            iziToast.error({\n                title: 'Error',\n                message: `An API error occurred: ${error.message}`,\n                position: 'topRight'\n            });\n        }\n    })\n    .finally(() => {\n        loader.style.display = \"none\";\n    });\n\n\n    event.currentTarget.reset();\n}\n\n\nfunction createImageCardMarkup(image) {\n    const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n    } = image;\n\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info-box\">\n                <p class=\"info-item\"><b>Likes</b>${likes}</p>\n                <p class=\"info-item\"><b>Views</b>${views}</p>\n                <p class=\"info-item\"><b>Comments</b>${comments}</p>\n                <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n            </div>\n        </a>\n    </li>\n    `;\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});"],"names":["form","gallery","loader","key","fetchImages","searchTerm","URL","response","data","onSearch","event","iziToast","images","markup","createImageCardMarkup","lightbox","error","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"6vBAQA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAM,qCAEZ,SAASC,EAAYC,EAAY,CAE7B,MAAMC,EAAM,gCAAgCH,CAAG,MAAME,CAAU,2DAE/D,OAAO,MAAMC,CAAG,EACX,KAAMC,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAMC,GAAS,CACZ,GAAIA,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,iBAAiB,EAErC,OAAOA,EAAK,IACxB,CAAS,CAEJ,CAELR,EAAK,iBAAiB,SAAUS,CAAQ,EAExC,SAASA,EAASC,EAAO,CACrBA,EAAM,eAAc,EAEpB,MAAML,EAAaK,EAAM,cAAc,SAAS,YAAY,MAAM,OAElE,GAAIL,IAAe,GAAI,CACnBM,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDV,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,QAEvBE,EAAYC,CAAU,EACrB,KAAKO,GAAU,CACZ,MAAMC,EAASD,EAAO,IAAIE,CAAqB,EAAE,KAAK,EAAE,EAExDb,EAAQ,mBAAmB,YAAaY,CAAM,EAE9CE,EAAS,QAAO,CACxB,CAAK,EACA,MAAOC,GAAU,CAEVA,EAAM,SAAW,kBACjBL,EAAS,MAAM,CACX,MAAO,QACP,QAAS,4EACT,SAAU,UAC1B,CAAa,EAEDA,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0BAA0BK,EAAM,OAAO,GAChD,SAAU,UAC1B,CAAa,CAEb,CAAK,EACA,QAAQ,IAAM,CACXd,EAAO,MAAM,QAAU,MAC/B,CAAK,EAGDQ,EAAM,cAAc,OACxB,CAGA,SAASI,EAAsBG,EAAO,CAClC,KAAM,CACF,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,EAAGP,EAEJ,MAAO;AAAA;AAAA,wCAE6BE,CAAa;AAAA,8CACPD,CAAY,UAAUE,CAAI;AAAA;AAAA,mDAErBC,CAAK;AAAA,mDACLC,CAAK;AAAA,sDACFC,CAAQ;AAAA,uDACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKhE,CAEA,MAAMT,EAAW,IAAIU,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC"}